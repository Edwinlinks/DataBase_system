{"remainingRequest":"/home/luotinkai/Documents/代码及数据库/fxBox/vue/node_modules/babel-loader/lib/index.js!/home/luotinkai/Documents/代码及数据库/fxBox/vue/src/router/index.js","dependencies":[{"path":"/home/luotinkai/Documents/代码及数据库/fxBox/vue/src/router/index.js","mtime":1638358162000},{"path":"/home/luotinkai/Documents/代码及数据库/fxBox/vue/babel.config.js","mtime":1638358162000},{"path":"/home/luotinkai/Documents/代码及数据库/fxBox/vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/luotinkai/Documents/代码及数据库/fxBox/vue/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgeyBjcmVhdGVSb3V0ZXIsIGNyZWF0ZVdlYkhpc3RvcnkgfSBmcm9tICd2dWUtcm91dGVyJzsKaW1wb3J0IExheW91dCBmcm9tICJAL2xheW91dC9MYXlvdXQiOwp2YXIgcm91dGVzID0gW3sKICBwYXRoOiAnLycsCiAgbmFtZTogJ0xheW91dCcsCiAgY29tcG9uZW50OiBMYXlvdXQsCiAgcmVkaXJlY3Q6ICIvaG9tZSIsCiAgY2hpbGRyZW46IFt7CiAgICBwYXRoOiAnaG9tZScsCiAgICBuYW1lOiAnSG9tZScsCiAgICBjb21wb25lbnQ6IGZ1bmN0aW9uIGNvbXBvbmVudCgpIHsKICAgICAgcmV0dXJuIGltcG9ydCgiQC92aWV3cy9Ib21lIik7CiAgICB9CiAgfV0KfSwgewogIHBhdGg6ICcvbG9naW4nLAogIG5hbWU6ICdMb2dpbicsCiAgY29tcG9uZW50OiBmdW5jdGlvbiBjb21wb25lbnQoKSB7CiAgICByZXR1cm4gaW1wb3J0KCJAL3ZpZXdzL0xvZ2luIik7CiAgfQp9LCB7CiAgcGF0aDogJy9yZWdpc3RlcicsCiAgbmFtZTogJ1JlZ2lzdGVyJywKICBjb21wb25lbnQ6IGZ1bmN0aW9uIGNvbXBvbmVudCgpIHsKICAgIHJldHVybiBpbXBvcnQoIkAvdmlld3MvUmVnaXN0ZXIiKTsKICB9Cn1dOwp2YXIgcm91dGVyID0gY3JlYXRlUm91dGVyKHsKICBoaXN0b3J5OiBjcmVhdGVXZWJIaXN0b3J5KHByb2Nlc3MuZW52LkJBU0VfVVJMKSwKICByb3V0ZXM6IHJvdXRlcwp9KTsgLy8g5Zyo5Yi35paw6aG16Z2i55qE5pe25YCZ6YeN572u5b2T5YmN6Lev55SxCgphY3RpdmVSb3V0ZXIoKTsKCmZ1bmN0aW9uIGFjdGl2ZVJvdXRlcigpIHsKICB2YXIgdXNlclN0ciA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInVzZXIiKTsKCiAgaWYgKHVzZXJTdHIpIHsKICAgIHZhciB1c2VyID0gSlNPTi5wYXJzZSh1c2VyU3RyKTsKICAgIHZhciByb290ID0gewogICAgICBwYXRoOiAnLycsCiAgICAgIG5hbWU6ICdMYXlvdXQnLAogICAgICBjb21wb25lbnQ6IExheW91dCwKICAgICAgcmVkaXJlY3Q6ICIvaG9tZSIsCiAgICAgIGNoaWxkcmVuOiBbXQogICAgfTsKICAgIHVzZXIucGVybWlzc2lvbnMuZm9yRWFjaChmdW5jdGlvbiAocCkgewogICAgICB2YXIgb2JqID0gewogICAgICAgIHBhdGg6IHAucGF0aCwKICAgICAgICBuYW1lOiBwLm5hbWUsCiAgICAgICAgY29tcG9uZW50OiBmdW5jdGlvbiBjb21wb25lbnQoKSB7CiAgICAgICAgICByZXR1cm4gaW1wb3J0KCJAL3ZpZXdzLyIgKyBwLm5hbWUpOwogICAgICAgIH0KICAgICAgfTsKICAgICAgcm9vdC5jaGlsZHJlbi5wdXNoKG9iaik7CiAgICB9KTsKCiAgICBpZiAocm91dGVyKSB7CiAgICAgIHJvdXRlci5hZGRSb3V0ZShyb290KTsKICAgIH0KICB9Cn0KCnJvdXRlci5iZWZvcmVFYWNoKGZ1bmN0aW9uICh0bywgZnJvbSwgbmV4dCkgewogIGlmICh0by5wYXRoID09PSAnL2xvZ2luJyB8fCB0by5wYXRoID09PSAnL3JlZ2lzdGVyJykgewogICAgbmV4dCgpOwogICAgcmV0dXJuOwogIH0KCiAgdmFyIHVzZXIgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ1c2VyIikgPyBKU09OLnBhcnNlKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInVzZXIiKSkgOiB7fTsKCiAgaWYgKCF1c2VyLnBlcm1pc3Npb25zIHx8ICF1c2VyLnBlcm1pc3Npb25zLmxlbmd0aCkgewogICAgbmV4dCgnL2xvZ2luJyk7CiAgfSBlbHNlIGlmICghdXNlci5wZXJtaXNzaW9ucy5maW5kKGZ1bmN0aW9uIChwKSB7CiAgICByZXR1cm4gcC5wYXRoID09PSB0by5wYXRoOwogIH0pKSB7CiAgICBuZXh0KCcvbG9naW4nKTsKICB9IGVsc2UgewogICAgbmV4dCgpOwogIH0KfSk7CmV4cG9ydCBkZWZhdWx0IHJvdXRlcjs="},{"version":3,"names":["createRouter","createWebHistory","Layout","routes","path","name","component","redirect","children","router","history","process","env","BASE_URL","activeRouter","userStr","sessionStorage","getItem","user","JSON","parse","root","permissions","forEach","p","obj","push","addRoute","beforeEach","to","from","next","length","find"],"sources":["/home/luotinkai/Documents/代码及数据库/fxBox/vue/src/router/index.js"],"sourcesContent":["import {createRouter, createWebHistory} from 'vue-router'\nimport Layout from \"@/layout/Layout\";\n\nconst routes = [\n    {\n        path: '/',\n        name: 'Layout',\n        component: Layout,\n        redirect: \"/home\",\n        children: [\n            {\n                path: 'home',\n                name: 'Home',\n                component: () => import(\"@/views/Home\"),\n            },\n        ]\n    },\n    {\n        path: '/login',\n        name: 'Login',\n        component: () => import(\"@/views/Login\")\n    },\n    {\n        path: '/register',\n        name: 'Register',\n        component: () => import(\"@/views/Register\")\n    },\n]\n\nconst router = createRouter({\n    history: createWebHistory(process.env.BASE_URL),\n    routes\n})\n\n// 在刷新页面的时候重置当前路由\nactiveRouter()\n\nfunction activeRouter() {\n    const userStr = sessionStorage.getItem(\"user\")\n    if (userStr) {\n        const user = JSON.parse(userStr)\n        let root = {\n            path: '/',\n            name: 'Layout',\n            component: Layout,\n            redirect: \"/home\",\n            children: []\n        }\n        user.permissions.forEach(p => {\n            let obj = {\n                path: p.path,\n                name: p.name,\n                component: () => import(\"@/views/\" + p.name)\n            };\n            root.children.push(obj)\n        })\n        if (router) {\n            router.addRoute(root)\n        }\n    }\n}\n\nrouter.beforeEach((to, from, next) => {\n    if (to.path === '/login' || to.path === '/register') {\n        next()\n        return\n    }\n    let user = sessionStorage.getItem(\"user\") ? JSON.parse(sessionStorage.getItem(\"user\")) : {}\n    if (!user.permissions || !user.permissions.length) {\n        next('/login')\n    } else if (!user.permissions.find(p => p.path === to.path)) {\n        next('/login')\n    } else {\n        next()\n    }\n})\n\nexport default router\n"],"mappings":";;;;;;AAAA,SAAQA,YAAR,EAAsBC,gBAAtB,QAA6C,YAA7C;AACA,OAAOC,MAAP,MAAmB,iBAAnB;AAEA,IAAMC,MAAM,GAAG,CACX;EACIC,IAAI,EAAE,GADV;EAEIC,IAAI,EAAE,QAFV;EAGIC,SAAS,EAAEJ,MAHf;EAIIK,QAAQ,EAAE,OAJd;EAKIC,QAAQ,EAAE,CACN;IACIJ,IAAI,EAAE,MADV;IAEIC,IAAI,EAAE,MAFV;IAGIC,SAAS,EAAE;MAAA,OAAM,OAAO,cAAP,CAAN;IAAA;EAHf,CADM;AALd,CADW,EAcX;EACIF,IAAI,EAAE,QADV;EAEIC,IAAI,EAAE,OAFV;EAGIC,SAAS,EAAE;IAAA,OAAM,OAAO,eAAP,CAAN;EAAA;AAHf,CAdW,EAmBX;EACIF,IAAI,EAAE,WADV;EAEIC,IAAI,EAAE,UAFV;EAGIC,SAAS,EAAE;IAAA,OAAM,OAAO,kBAAP,CAAN;EAAA;AAHf,CAnBW,CAAf;AA0BA,IAAMG,MAAM,GAAGT,YAAY,CAAC;EACxBU,OAAO,EAAET,gBAAgB,CAACU,OAAO,CAACC,GAAR,CAAYC,QAAb,CADD;EAExBV,MAAM,EAANA;AAFwB,CAAD,CAA3B,C,CAKA;;AACAW,YAAY;;AAEZ,SAASA,YAAT,GAAwB;EACpB,IAAMC,OAAO,GAAGC,cAAc,CAACC,OAAf,CAAuB,MAAvB,CAAhB;;EACA,IAAIF,OAAJ,EAAa;IACT,IAAMG,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWL,OAAX,CAAb;IACA,IAAIM,IAAI,GAAG;MACPjB,IAAI,EAAE,GADC;MAEPC,IAAI,EAAE,QAFC;MAGPC,SAAS,EAAEJ,MAHJ;MAIPK,QAAQ,EAAE,OAJH;MAKPC,QAAQ,EAAE;IALH,CAAX;IAOAU,IAAI,CAACI,WAAL,CAAiBC,OAAjB,CAAyB,UAAAC,CAAC,EAAI;MAC1B,IAAIC,GAAG,GAAG;QACNrB,IAAI,EAAEoB,CAAC,CAACpB,IADF;QAENC,IAAI,EAAEmB,CAAC,CAACnB,IAFF;QAGNC,SAAS,EAAE;UAAA,OAAM,OAAO,aAAakB,CAAC,CAACnB,IAAtB,CAAN;QAAA;MAHL,CAAV;MAKAgB,IAAI,CAACb,QAAL,CAAckB,IAAd,CAAmBD,GAAnB;IACH,CAPD;;IAQA,IAAIhB,MAAJ,EAAY;MACRA,MAAM,CAACkB,QAAP,CAAgBN,IAAhB;IACH;EACJ;AACJ;;AAEDZ,MAAM,CAACmB,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;EAClC,IAAIF,EAAE,CAACzB,IAAH,KAAY,QAAZ,IAAwByB,EAAE,CAACzB,IAAH,KAAY,WAAxC,EAAqD;IACjD2B,IAAI;IACJ;EACH;;EACD,IAAIb,IAAI,GAAGF,cAAc,CAACC,OAAf,CAAuB,MAAvB,IAAiCE,IAAI,CAACC,KAAL,CAAWJ,cAAc,CAACC,OAAf,CAAuB,MAAvB,CAAX,CAAjC,GAA8E,EAAzF;;EACA,IAAI,CAACC,IAAI,CAACI,WAAN,IAAqB,CAACJ,IAAI,CAACI,WAAL,CAAiBU,MAA3C,EAAmD;IAC/CD,IAAI,CAAC,QAAD,CAAJ;EACH,CAFD,MAEO,IAAI,CAACb,IAAI,CAACI,WAAL,CAAiBW,IAAjB,CAAsB,UAAAT,CAAC;IAAA,OAAIA,CAAC,CAACpB,IAAF,KAAWyB,EAAE,CAACzB,IAAlB;EAAA,CAAvB,CAAL,EAAqD;IACxD2B,IAAI,CAAC,QAAD,CAAJ;EACH,CAFM,MAEA;IACHA,IAAI;EACP;AACJ,CAbD;AAeA,eAAetB,MAAf"}]}